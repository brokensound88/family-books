# Project Requirements Document for FamilyBooks

## **Overview**

**FamilyBooks** is an iOS-first mobile application designed to empower families to manage their finances, synchronize bank accounts, superannuation (with a focus on the Australian market), savings, and investment accounts, educate children on saving and investing, and balance household budgets through a visually stunning, gamified interface. The app leverages **Kotlin Multiplatform Mobile (KMM)** for shared business logic and **SwiftUI** for a native iOS user interface, with plans for future Android expansion using Jetpack Compose. Development will utilize **Windsurf** (IntelliJ-based IDE) and **Cursor** (AI-driven IDE) for vibe-coding, incorporating AI-assisted tools like GitHub Copilot and Figma plugins (Magician, Builder.io) to streamline wireframing and code generation. This Project Requirements Document (PRD) outlines the functional, non-functional, technical, and design requirements to ensure a robust, user-friendly, and scalable application that meets the needs of families while adhering to modern iOS development standards and financial regulations.

## **Objectives**

- Deliver a Minimum Viable Product (MVP) for iOS within 6–11 months, featuring core financial management and kid education functionalities.
- Ensure 40–50% code reuse through KMM for future Android implementation.
- Create a visually stunning, accessible, and intuitive SwiftUI interface optimized for families and kids (ages 8–18).
- Integrate secure financial APIs (Plaid, Yodlee, FinanceKit) for real-time account syncing.
- Achieve compliance with PCI DSS, GDPR, and Australia’s Privacy Act for secure financial data handling.
- Leverage AI-driven tools in Windsurf and Cursor to accelerate vibe-coding and prototyping.

## **Scope**

### **MVP Features**

The MVP focuses on iOS with KMM shared logic, delivering core functionalities for family financial management and education, with scalability for Android.

1. **Financial Account Integration**:
   - Sync with bank accounts, superannuation (Australian focus), savings, and investment accounts.
   - Support for major institutions (e.g., Commonwealth Bank, ANZ, Vanguard) via Plaid/Yodlee.
   - Optional FinanceKit integration for Apple Wallet (iOS 18.4+).
   - Manual CSV import for unsupported accounts.
2. **Budgeting and Bookkeeping**:
   - Zero-based budgeting with customizable categories (e.g., groceries, kids’ activities).
   - AI-driven transaction categorization using AWS SageMaker, with optional Core ML for offline processing.
   - Bill reminders and shared family budgets for collaborative planning.
3. **Financial Education for Kids**:
   - Gamified modules teaching saving, investing, and budgeting (e.g., virtual savings jars, stock market simulations).
   - Parental oversight with goal-setting and approval features.
4. **Visual Dashboards and Analytics**:
   - Real-time net worth tracking with animated SwiftUI charts.
   - Spending insights with interactive visualizations (e.g., pie charts, bar graphs).
   - Financial health score with gamified progress bars.
5. **Investment and Savings Growth**:
   - Track investment portfolios and superannuation performance.
   - AI-driven savings suggestions (e.g., round-up features).
   - Goal-oriented investing for family projects (e.g., vacations, home purchase).
6. **Collaboration Features**:
   - Family accounts with role-based access (parents as admins, kids as limited users).
   - Shared savings goals with in-app notifications.
7. **User Experience**:
   - Visually stunning SwiftUI interface with vibrant themes, SF Symbols, and animations.
   - Accessibility support (VoiceOver, dynamic type, localization for English and Australian English).

### **Out-of-Scope (Post-MVP)**

- Android implementation with Jetpack Compose (planned for Phase 6).
- Advanced investment tools (e.g., robo-advisory, crypto tracking).
- Web app for desktop access.
- Additional educational modules (e.g., advanced investing simulations).

## **Functional Requirements**

### **1. Financial Account Integration**

- **Bank Syncing**:
  - Connect to major banks (e.g., Commonwealth Bank, ANZ, Chase, HSBC) via Plaid/Yodlee APIs.
  - KMM module to handle authentication, data fetching, and parsing:

    ```kotlin
    expect interface AccountRepository {
        suspend fun connectAccount(credentials: AccountCredentials): Result<Account>
        suspend fun fetchBalances(accountId: String): List<Balance>
    }
    ```

  - Support for Australian super funds (e.g., AustralianSuper, Rest).
- **FinanceKit Integration (iOS)**:
  - Sync Apple Wallet accounts (iOS 18.4+):

    ```swift
    import FinanceKit
    class AccountViewModel: ObservableObject {
        @Published var accounts: [FinanceAccount] = []
        func loadAccounts() async {
            do {
                accounts = try await FinanceStore.shared.accounts()
            } catch { print("Error: \(error)") }
        }
    }
    ```

  - Fallback to Plaid/Yodlee for non-supported accounts.
- **Manual Import**:
  - Upload CSV files for transaction data, processed in KMM:

    ```kotlin
    suspend fun importCsv(file: File): List<Transaction> {
        return CsvParser.parseTransactions(file)
    }
    ```

### **2. Budgeting and Bookkeeping**

- **Zero-Based Budgeting**:
  - Allocate every dollar to categories, stored in Firestore via KMM:

    ```kotlin
    data class Budget(val id: String, val name: String, val amount: Double, val spent: Double)
    suspend fun createBudget(name: String, amount: Double): Budget {
        return FirestoreClient.saveBudget(name, amount)
    }
    ```

  - SwiftUI UI for budget creation and editing:

    ```swift
    struct BudgetView: View {
        @StateObject private var viewModel = BudgetViewModel()
        var body: some View {
            Form {
                TextField("Budget Name", text: $viewModel.name)
                TextField("Amount", value: $viewModel.amount, format: .currency(code: "AUD"))
                Button("Save") { Task { await viewModel.saveBudget() } }
            }
        }
    }
    ```

- **Transaction Categorization**:
  - AI-driven categorization using AWS SageMaker in KMM:

    ```kotlin
    class Categorizer {
        suspend fun categorize(transactions: List<Transaction>): List<Transaction> {
            return SageMakerClient.categorizeTransactions(transactions)
        }
    }
    ```

  - Optional Core ML for offline categorization on iOS:

    ```swift
    import CoreML
    func categorizeLocally(transaction: Transaction) -> String? {
        guard let model = try? TransactionClassifier(configuration: .init()) else { return nil }
        return try? model.prediction(text: transaction.description).category
    }
    ```

- **Bill Reminders**:
  - Push notifications via Firebase Cloud Messaging, configured in KMM.

### **3. Financial Education for Kids**

- **Gamified Modules**:
  - Virtual savings jars and stock portfolios in SwiftUI:

    ```swift
    struct SavingsJarView: View {
        @StateObject private var viewModel = SavingsJarViewModel()
        var body: some View {
            VStack {
                Text(viewModel.goalName)
                    .font(.title2)
                ProgressView(value: viewModel.progress)
                    .progressViewStyle(.circular)
                    .tint(.green)
                    .scaleEffect(1.5)
                    .animation(.spring(), value: viewModel.progress)
            }
        }
    }
    ```

  - Shared logic in KMM for goal tracking:

    ```kotlin
    data class SavingsGoal(val id: String, val name: String, val target: Double, val current: Double)
    suspend fun updateGoal(goalId: String, amount: Double): SavingsGoal {
        return FirestoreClient.updateGoal(goalId, amount)
    }
    ```

- **Parental Oversight**:
  - Approve goals or transactions via SwiftUI interface, with KMM backend validation.

### **4. Visual Dashboards and Analytics**

- **Net Worth Tracking**:
  - Aggregate assets and liabilities in KMM, displayed in SwiftUI:

    ```swift
    struct DashboardView: View {
        @StateObject private var viewModel = DashboardViewModel()
        var body: some View {
            NavigationStack {
                VStack {
                    Chart {
                        ForEach(viewModel.spendingData) { data in
                            BarMark(x: .value("Category", data.category), y: .value("Amount", data.amount))
                                .foregroundStyle(.blue.gradient)
                        }
                    }
                    .frame(height: 200)
                    Text("Net Worth: $\(viewModel.netWorth, specifier: "%.2f")")
                        .font(.title)
                }
                .navigationTitle("Family Wealth")
            }
            .task { await viewModel.loadData() }
        }
    }
    ```

- **Spending Insights**:
  - Interactive charts using SwiftUI’s `Chart` framework, driven by KMM analytics.
- **Financial Health Score**:
  - Calculated in KMM, visualized with gamified progress bars in SwiftUI.

### **5. Investment and Savings Growth**

- **Portfolio Tracking**:
  - Sync with brokerage accounts via Plaid in KMM:

    ```kotlin
    suspend fun fetchPortfolio(accountId: String): Portfolio {
        return PlaidApi.getPortfolio(accountId)
    }
    ```

- **Savings Suggestions**:
  - AI-driven round-up or allocation logic in KMM, with optional Core ML on iOS.
- **Superannuation Insights**:
  - Australian super fund data (e.g., contribution tracking) via Yodlee, visualized in SwiftUI.

### **6. Collaboration Features**

- **Family Accounts**:
  - Role-based access (admin for parents, limited for kids) in KMM:

    ```kotlin
    data class User(val id: String, val role: Role, val familyId: String)
    enum class Role { ADMIN, CHILD }
    suspend fun createUser(email: String, role: Role): User {
        return FirebaseAuth.createUser(email, role)
    }
    ```

- **Shared Goals**:
  - Real-time updates via Firestore, with SwiftUI notifications.

### **7. User Experience**

- **SwiftUI Design**:
  - Vibrant themes with SF Symbols, gradients, and animations:

    ```swift
    struct GoalCard: View {
        @State private var isTapped = false
        var body: some View {
            VStack {
                Text("Vacation Fund")
                    .font(.headline)
                Text("$1,200 / $5,000")
                    .font(.subheadline)
            }
            .padding()
            .background(LinearGradient(colors: [.orange, .red], startPoint: .top, endPoint: .bottom))
            .cornerRadius(12)
            .scaleEffect(isTapped ? 1.05 : 1.0)
            .animation(.spring(), value: isTapped)
            .onTapGesture { isTapped.toggle() }
        }
    }
    ```

- **Accessibility**:
  - Support VoiceOver, dynamic type, and localization (English, Australian English).

## **Non-Functional Requirements**

### **Performance**

- **Syncing**: Account data syncs within 5 seconds under normal network conditions.
- **UI Responsiveness**: SwiftUI animations render at 60 FPS on iOS 16.0+ devices.
- **Scalability**: Backend (Firestore, AWS) supports 10,000 concurrent users, scaling to 100,000 within 2 years.

### **Security**

- **Encryption**: End-to-end encryption for API calls in KMM.
- **Authentication**: Multi-factor authentication (MFA) via Firebase, with Keychain Services for credentials:

  ```swift
  import Security
  func saveToken(token: String) {
      let data = token.data(using: .utf8)!
      let query: [String: Any] = [kSecClass as String: kSecClassGenericPassword,
                                  kSecAttrAccount as String: "userToken",
                                  kSecValueData as String: data]
      SecItemAdd(query as CFDictionary, nil)
  }
  ```

- **Compliance**: Adhere to PCI DSS, GDPR, and Australia’s Privacy Act.

### **Reliability**

- **Uptime**: Backend availability of 99.9% via Firebase/AWS.
- **Error Handling**: Graceful fallback for API failures (e.g., manual import for failed syncs).

### **Usability**

- **Onboarding**: Guided setup for account syncing and family account creation, completed in <5 minutes.
- **Intuitiveness**: Kid-friendly UI with minimal learning curve, validated via beta testing.

## **Technical Requirements**

### **Platform**

- **iOS**: iOS 16.0+, built with SwiftUI.
- **Android (Future)**: Android 10+, using Jetpack Compose.
- **KMM**: Shared Kotlin logic for API calls, data models, and AI processing.

### **Tech Stack**

- **Frontend**:
  - SwiftUI for iOS UI, leveraging `NavigationStack`, `Chart`, and `Animation`.
  - Jetpack Compose for Android (post-MVP).
- **Backend**:
  - Firebase: Authentication, Firestore for real-time data, Cloud Messaging for notifications.
  - AWS: SageMaker for AI, EC2/S3 for hosting.
- **APIs**:
  - Plaid/Yodlee for bank syncing, implemented in KMM.
  - FinanceKit for iOS Apple Wallet integration.
  - Stripe for premium subscriptions.
- **AI/ML**:
  - AWS SageMaker for cloud-based transaction categorization.
  - Core ML for optional iOS offline processing.
- **Development Tools**:
  - **Windsurf**: IntelliJ-based IDE for KMM development, with Copilot for Kotlin.
  - **Cursor**: AI-driven IDE for SwiftUI, with prompts like:

    ```swift
    // Create a SwiftUI view for a family dashboard with animated net worth chart
    ```

  - Figma + Magician/Builder.io for AI-generated wireframes and SwiftUI code.

### **Testing**

- **Unit Testing**: JUnit for KMM, XCTest for SwiftUI.
- **UI Testing**: XCTest for SwiftUI flows.
- **Integration Testing**: Verify KMM API calls and FinanceKit integration.
- **Security Testing**: Penetration testing for data vulnerabilities.

## **Design Requirements**

- **Visual Style**:
  - Vibrant, family-friendly themes with gradients and SF Symbols.
  - Animations for engagement (e.g., scaling cards, progress bars).
- **Accessibility**:
  - Support VoiceOver, dynamic type, and high-contrast modes.
- **Wireframing**:
  - Use Figma with Magician to generate wireframes:
    - Example prompt: “iOS dashboard with colorful budget cards and kid savings goals.”
  - Export to SwiftUI via Builder.io.

## **Constraints**

- **Budget**: $120,000–$450,000 for iOS MVP, $50,000–$150,000 for Android.
- **Timeline**: 6–11 months for iOS MVP, 2–3 months for Android.
- **API Availability**: Some Australian super funds may not support Plaid/Yodlee, requiring manual imports.
- **Regulatory Compliance**: Must meet PCI DSS, GDPR, and Australia’s Privacy Act, adding development time.

## **Assumptions**

- Users have iOS 16.0+ devices (iPhone, iPad).
- Plaid/Yodlee cover 80%+ of target banks/super funds.
- Families are willing to share financial data with secure, compliant apps.
- AI tools in Windsurf/Cursor accelerate development by 10–20%.

## **Dependencies**

- **External APIs**: Plaid/Yodlee access, FinanceKit entitlement from Apple.
- **Third-Party Services**: Firebase, AWS, Stripe accounts.
- **Development Tools**: Windsurf, Cursor, Figma subscriptions.

## **Vibe-Coding Workflow**

- **Windsurf**:
  - Use IntelliJ’s KMM plugin for shared logic, with Copilot for rapid Kotlin development:

    ```kotlin
    // Implement a Kotlin function to fetch and categorize transactions from Yodlee
    ```

  - Leverage KMM templates for data models and API clients.
- **Cursor**:
  - Generate SwiftUI views with AI prompts:

    ```swift
    // Create a SwiftUI view for a kid’s savings jar with animated progress circle
    ```

  - Debug and optimize code using Cursor’s AI suggestions.
- **AI Design Tools**:
  - Figma + Magician for wireframes, exported to SwiftUI via Builder.io.
  - Example: Generate a dashboard layout, then code in Cursor.
- **Iterative Development**:
  - Code in 1–2 week sprints, prototyping one feature (e.g., budget view) per sprint.
  - Validate with users via Figma prototypes and TestFlight betas.

## **Success Criteria**

- **Functional**: All MVP features (syncing, budgeting, kid education, dashboards) fully operational.
- **Performance**: App loads in <2 seconds, syncs data in <5 seconds.
- **User Satisfaction**: 4.5+ App Store rating, 40%+ 90-day retention.
- **Scalability**: KMM logic reusable for Android with minimal changes.
- **Security**: No critical vulnerabilities in penetration testing.

## **Stakeholders**

- **Product Owner**: Oversees vision, feature prioritization, and user feedback.
- **Developers**: 2–3 with Kotlin/Swift expertise for KMM and SwiftUI.
- **Designer**: Creates Figma wireframes and SwiftUI styles.
- **DevOps**: Manages Firebase/AWS infrastructure.
- **Users**: Families, parents, and kids (ages 8–18).

## **Milestones**

- **Month 1–2**: Research, IDE setup, API access.
- **Month 3–4**: Wireframes, prototypes, user validation.
- **Month 5–10**: KMM and SwiftUI development, API integration.
- **Month 11–12**: Testing, beta launch, App Store submission.
- **Month 13–15**: Android development with Jetpack Compose.

## **Conclusion**

This PRD provides a comprehensive blueprint for developing **FamilyBooks**, ensuring a robust, visually stunning iOS app with KMM for scalable Android expansion. By leveraging Windsurf and Cursor for vibe-coding, AI tools for design and code generation, and secure financial APIs, the app will meet the needs of families while achieving market success. The requirements balance functionality, performance, and user engagement, setting the stage for a leading family finance app.

*Word Count: ~2100*

```

---
