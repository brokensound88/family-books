# App Flow Document for FamilyBooks

## **Overview**

**FamilyBooks** is an iOS 18-first mobile application designed to empower Australian families to manage their finances, synchronize bank accounts, superannuation, savings, and investment accounts, educate children on saving and investing, and balance household budgets through a visually stunning, gamified interface. Built entirely in **Swift** and **SwiftUI**, the app leverages the latest iOS 18 capabilities to deliver a native, high-performance experience on iPhone and iPad, with potential future expansion to macOS via Mac Catalyst. Development will utilize **Windsurf** (configured as a Swift-focused IDE) and **Cursor** (an AI-driven IDE) for vibe-coding, harnessing AI tools like GitHub Copilot and Figma plugins (Magician, Builder.io) to accelerate wireframing, code generation, and prototyping. This App Flow Document outlines the user journey, screen flows, state management, data synchronization, error handling, and vibe-coding workflows for the app’s Minimum Viable Product (MVP), scheduled for launch by July 2026 (adjusted from the original plan due to the current date of August 28, 2025). The flows integrate iOS 18 frameworks (e.g., FinanceKit, SwiftData, WidgetKit) and financial APIs (Plaid, Yodlee), ensuring a seamless, family-focused experience compliant with Apple’s Human Interface Guidelines, PCI DSS, GDPR, and Australia’s Privacy Act.

## **Objectives**

- Define a clear, intuitive user journey for financial management and kid education on iOS 18.
- Implement SwiftUI-based screen flows for core MVP features: account syncing, budgeting, kids’ education, investment tracking, and family collaboration.
- Leverage iOS 18 frameworks (e.g., SwiftData for persistence, WidgetKit for notifications) for real-time data and engagement.
- Ensure robust state management and error handling for a reliable user experience.
- Utilize Windsurf and Cursor for AI-assisted vibe-coding to streamline app flow development and testing.
- Support scalability for 10,000 concurrent users and future macOS expansion.
- Achieve a 4.5+ App Store rating through seamless navigation and user satisfaction.

## **User Journey**

### **Overview**

The user journey begins with onboarding, progresses through core feature usage (e.g., budgeting, kids’ modules), and includes ongoing engagement via notifications and settings adjustments. The flow is designed for two primary personas: **Sarah** (35-year-old parent) and **Liam** (12-year-old child), ensuring accessibility and engagement for all family members.

### **Key Stages**

1. **Onboarding**:
   - Welcome screen → Sign-Up/Login → Account Sync.
   - Duration: <5 minutes.
2. **Core Usage**:
   - Dashboard overview → Budget management → Kids’ education → Investment tracking → Family collaboration.
   - Daily/weekly interaction.
3. **Engagement**:
   - Notifications for bills/goals → Widget updates → Settings customization.
   - Ongoing monthly engagement.

### **User Personas**

- **Sarah (Parent)**:
  - Goal: Manage family finances, oversee kids’ goals.
  - Flow: Onboarding → Dashboard → Budgets → Kids’ Approval.
- **Liam (Child)**:
  - Goal: Learn saving, track virtual portfolio.
  - Flow: Onboarding → Kids’ Module → Savings Goals.

## **Screen Flows**

### **Onboarding Flow**

- **WelcomeView** → **SignUpView** → **LoginView** → **AccountSyncView**.
- **Description**: Guides users through registration and account linking.
- **Example**:

  ```swift
  // ios/FamilyWealthBuilder/Views/Onboarding/WelcomeView.swift
  import SwiftUI
  struct WelcomeView: View {
      @State private var showSignUp = false
      var body: some View {
          VStack {
              Text("Welcome to FamilyBooks!")
                  .font(.largeTitle)
                  .foregroundStyle(.blue)
              Button("Get Started") {
                  showSignUp = true
              }
              .buttonStyle(.borderedProminent)
              .sheet(isPresented: $showSignUp) {
                  SignUpView()
              }
          }
      }
  }
  ```

- **Transitions**: Animated fade (`.opacity`) with a 0.3-second duration.

### **Dashboard Flow**

- **DashboardView** → **BudgetDetailsView** → **TransactionHistoryView**.
- **Description**: Provides an overview and drills into financial details.
- **Example**:

  ```swift
  // ios/FamilyWealthBuilder/Views/Dashboard/DashboardView.swift
  import SwiftUI
  struct DashboardView: View {
      @StateObject private var viewModel = DashboardViewModel()
      var body: some View {
          NavigationStack {
              ScrollView {
                  VStack {
                      Text("Net Worth: $\(viewModel.netWorth, specifier: "%.2f")")
                          .font(.title)
                      Chart {
                          ForEach(viewModel.spendingData) { data in
                              BarMark(x: .value("Category", data.category), y: .value("Amount", data.amount))
                                  .foregroundStyle(.blue.gradient)
                          }
                      }
                      .frame(height: 200)
                      .animation(.easeInOut, value: viewModel.spendingData)
                      NavigationLink(destination: BudgetDetailsView()) {
                          Text("View Budgets")
                      }
                  }
                  .padding()
              }
              .navigationTitle("Dashboard")
              .task { await viewModel.loadData() }
          }
      }
  }
  class DashboardViewModel: ObservableObject {
      @Published var netWorth: Double = 0.0
      @Published var spendingData: [CategoryData] = []
      private let financialService = FinancialService()
      func loadData() async {
          let transactions = try? await financialService.fetchTransactions(accountId: "user123")
          netWorth = transactions?.reduce(0.0, { $0 + $1.amount }) ?? 0.0
          spendingData = transactions?.groupByCategory() ?? []
      }
  }
  ```

- **Transitions**: Slide animation with `.navigationTransition`.

### **Kids’ Education Flow**

- **KidsView** → **SavingsGoalView** → **InvestingLessonView** → **ParentApprovalView**.
- **Description**: Engages kids with learning and requires parental oversight.
- **Example**:

  ```swift
  // ios/FamilyWealthBuilder/Views/Kids/SavingsGoalView.swift
  import SwiftUI
  struct SavingsGoalView: View {
      @StateObject private var viewModel = SavingsGoalViewModel()
      var body: some View {
          VStack {
              Text(viewModel.goal.name)
                  .font(.title2)
              ProgressView(value: viewModel.progress)
                  .progressViewStyle(.circular)
                  .tint(.green)
                  .scaleEffect(1.5)
                  .animation(.spring(), value: viewModel.progress)
                  .accessibilityLabel("Goal: \(viewModel.goal.name), \(Int(viewModel.progress * 100))% complete")
              NavigationLink(destination: ParentApprovalView(goal: viewModel.goal)) {
                  Text("Request Approval")
              }
          }
          .task { await viewModel.loadGoal() }
      }
  }
  class SavingsGoalViewModel: ObservableObject {
      @Published var goal: SavingsGoal
      var progress: Double { goal.current / goal.target }
      private let savingsService = SavingsService()
      init() { goal = SavingsGoal(name: "Bike", target: 100.0) }
      func loadGoal() async {
          goal = (try? await savingsService.fetchGoal(userId: "liam123")) ?? goal
      }
  }
  ```

- **Transitions**: Bounce animation for kid engagement.

### **Investment Tracking Flow**

- **InvestmentsView** → **PortfolioDetailsView**.
- **Description**: Displays investment performance with detailed breakdowns.
- **Example**:

  ```swift
  struct InvestmentsView: View {
      @StateObject private var viewModel = InvestmentsViewModel()
      var body: some View {
          NavigationStack {
              ScrollView {
                  Chart {
                      ForEach(viewModel.holdings) { holding in
                          LineMark(x: .value("Date", holding.date), y: .value("Value", holding.value))
                              .foregroundStyle(.purple.gradient)
                      }
                  }
                  .frame(height: 200)
                  .accessibilityLabel("Portfolio performance chart")
                  NavigationLink(destination: PortfolioDetailsView()) {
                      Text("View Details")
                  }
              }
              .navigationTitle("Investments")
              .task { await viewModel.loadPortfolio() }
          }
      }
  }
  ```

### **Settings Flow**

- **SettingsView** → **AccountManagementView** → **ThemeSelectionView**.
- **Description**: Allows customization and account management.
- **Example**:

  ```swift
  struct SettingsView: View {
      var body: some View {
          NavigationStack {
              List {
                  NavigationLink(destination: AccountManagementView()) {
                      Text("Manage Accounts")
                  }
                  NavigationLink(destination: ThemeSelectionView()) {
                      Text("Change Theme")
                  }
              }
              .navigationTitle("Settings")
          }
      }
  }
  ```

## **State Management**

### **Approach**

- **ObservableObject**: Use `@StateObject` and `@Published` for view models.
- **Environment**: Share data via `@EnvironmentObject`.
- Example:

  ```swift
  // ios/FamilyWealthBuilder/Models/AppState.swift
  import SwiftUI
  class AppState: ObservableObject {
      @Published var isAuthenticated: Bool = false
      @Published var user: User?
  }
  // Usage
  struct ContentView: View {
      @EnvironmentObject var appState: AppState
      var body: some View {
          if appState.isAuthenticated {
              DashboardView()
          } else {
              LoginView()
          }
      }
  }
  ```

### **Data Synchronization**

- **SwiftData**: Local state persistence.
- **CloudKit**: Real-time sync across devices.
- Example:

  ```swift
  // ios/FamilyWealthBuilder/Services/SyncService.swift
  import CloudKit
  class SyncService {
      func syncBudget(budget: Budget) async throws {
          let record = CKRecord(recordType: "Budget", recordID: CKRecord.ID(recordName: budget.id.uuidString))
          record["name"] = budget.name
          record["amount"] = budget.amount
          let container = CKContainer.default()
          try await container.privateCloudDatabase.save(record)
      }
  }
  ```

## **Error Handling**

### **Strategy**

- Use `try`/`catch` with async/await for API calls.
- Display alerts for user feedback.
- Example:

  ```swift
  // ios/FamilyWealthBuilder/Views/Dashboard/DashboardView.swift
  struct DashboardView: View {
      @State private var errorMessage: String?
      var body: some View {
          VStack {
              if let message = errorMessage {
                  Text(message)
                      .foregroundColor(.red)
              }
              // Content
          }
          .task {
              do {
                  try await viewModel.loadData()
              } catch {
                  errorMessage = "Failed to load data: \(error.localizedDescription)"
              }
          }
      }
  }
  ```

## **Vibe-Coding Workflow**

### **Tools**

- **Windsurf**: Swift IDE with Copilot for flow logic.
- **Cursor**: AI-driven IDE for SwiftUI flows, with prompts like:

  ```swift
  // Generate a SwiftUI onboarding flow with animated transitions
  ```

- **Xcode 16**: Previews, testing, and profiling.

### **Process**

1. **Planning (Now–September 2025)**:
   - Use Windsurf to draft flow diagrams, refine with Cursor prompts.
   - Example: “Generate Swift code for a dashboard navigation flow.”
2. **Design (October–November 2025)**:
   - Map flows in Figma, export to SwiftUI.
3. **Development (December 2025–April 2026)**:
   - Code sprints in Windsurf/Cursor, using AI prompts:

     ```swift
     // Create a SwiftUI kids’ education flow with parental approval
     ```

   - Example Output:

     ```swift
     // ios/FamilyWealthBuilder/Views/Kids/KidsView.swift
     struct KidsView: View {
         @StateObject private var viewModel = KidsViewModel()
         var body: some View {
             NavigationStack {
                 List(viewModel.goals) { goal in
                     NavigationLink(destination: SavingsGoalView(goal: goal)) {
                         Text(goal.name)
                     }
                 }
                 .navigationTitle("Kids' Goals")
                 .task { await viewModel.loadGoals() }
             }
         }
     }
     class KidsViewModel: ObservableObject {
         @Published var goals: [SavingsGoal] = []
         private let savingsService = SavingsService()
         func loadGoals() async {
             goals = try? await savingsService.fetchGoals(userId: "liam123") ?? []
         }
     }
     ```

4. **Testing (May–June 2026)**:
   - Use Cursor for XCTest cases, validate flows in Xcode.
   - Example: “Generate XCTest for navigation from Dashboard to Budget.”
5. **Deployment (July 2026)**:
   - Test flows in TestFlight, refine with user feedback.

### **AI-Assisted Vibe-Coding**

- **Windsurf**: Use Copilot for Swift flow logic:

  ```swift
  // Generate Swift code for a settings navigation flow
  ```

- **Cursor**: Accelerate SwiftUI flow coding:

  ```swift
  // Create a SwiftUI onboarding flow with FaceID authentication
  ```

- **Iterative Sprints**: Develop one flow (e.g., Onboarding) per 2-week sprint.

## **Constraints**

- **iOS Version**: iOS 18+ limits compatibility to ~60% of users by mid-2026.
- **FinanceKit**: Requires iOS 18.4+, with Plaid/Yodlee as fallback.
- **Development Time**: 6–9 months from September 2025 to July 2026.

## **Success Criteria**

- **Usability**: 90%+ of beta testers navigate flows intuitively.
- **Performance**: Transitions <1 second, syncs <5 seconds.
- **Reliability**: <1% error rate in data sync.
- **Engagement**: Kids complete 80%+ of educational flows.
- **Compliance**: Meets Apple and regulatory standards.

## **Conclusion**

This App Flow Document provides a comprehensive blueprint for **FamilyBooks**'s user journey and screen interactions, leveraging Swift/SwiftUI and iOS 18 frameworks for a seamless experience. By utilizing Windsurf and Cursor for vibe-coding, the document supports efficient development, targeting a July 2026 launch with scalability for macOS expansion. The integration of modern flows and AI-assisted workflows ensures a robust, family-focused app.

*Word Count: ~2000*

```

---
